"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _chunkEI7MMDWYjs = require('./chunk-EI7MMDWY.js');var _axios = require('axios'); var _axios2 = _interopRequireDefault(_axios);var h=function(t){return t.BTC="BTC",t.ETH="ETH",t}({}),l= exports.b =function(t){return t["5m"]="5m",t["8h"]="8h",t}({}),f= exports.c =function(t){return t.EthereumSepolia="ethereum-11155111",t}({}),n= exports.d =class{static{_chunkEI7MMDWYjs.a.call(void 0, this,"AlloraAPIClient")}constructor(e){this.apiKey=e.apiKey;let a=e.apiRoot||"https://api.upshot.xyz/v2/allora";this.apiRoot=a[a.length-1]==="/"?a.slice(0,a.length-1):a}async fetchAlloraPricePrediction(e,a,o="ethereum-11155111"){let i=`consumer/price/${o}/${e}/${a}`,r=await this.fetchAlloraAPIData(i);if(!_optionalChain([r, 'optionalAccess', _ => _.data, 'optionalAccess', _2 => _2.inference_data]))throw new Error(`API response missing data: ${JSON.stringify(r)}`);return r.data.inference_data}async fetchAlloraAPIData(e){let a=e[0]==="/"?e.slice(1):e,o=`${this.apiRoot}/${a}`,i={"Content-Type":"application/json",Accept:"application/json"};this.apiKey&&(i["x-api-key"]=this.apiKey);let r=await _axios2.default.get(o,{headers:i});if(r.status>=400)throw new Error(`Allora plugin: error requesting price prediction: url=${o} status=${r.status} body=${JSON.stringify(r.data,null,4)}`);return r.data}};exports.a = h; exports.b = l; exports.c = f; exports.d = n;
